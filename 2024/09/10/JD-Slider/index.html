<!DOCTYPE html><html lang="cn"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><link rel="shortcut icon" href="/assets/imgs/favicon.ico" type="image/x-icon"><title>记一次某东登录滑块 识别+轨迹 | Wantoper</title><meta name="keywords" content="杂七杂八"><meta name="keywords" content=""><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"><link rel="stylesheet" href="https://at.alicdn.com/t/c/font_3435803_wadmwlqwhps.css"><link rel="stylesheet" href="/style/index.css"><link rel="stylesheet" href="/assets/lib/prettify/prettify.css"><link rel="stylesheet" href="/assets/lib/fancybox/fancybox.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="app"><header class="header yu13_p_30" id="header"><div class="header_left"><h1 class="yu13_logo"><a id="logo" href="/">Wantoper</a></h1></div><div class="header_right"><div class="header_search yu13_cursor yu13_hover" id="search"><i class="yufont icon-sousuo"></i></div><div class="line yu13_p_10"></div><nav class="header_nav"><ul class="nav"><li class="menu_nav"><a href="/"><i class="fas"></i><span> 首页</span></a></li><li class="menu_nav"><a href="/archives"><i class="fas"></i><span> 归档</span></a></li><li class="menu_nav"><a href="/categorys"><i class="fas"></i><span> 分类</span></a></li><li class="menu_nav"><a href="/tags"><i class="fas"></i><span> 标签</span></a></li><li class="menu_nav"><a href="/links"><i class="fas"></i><span> 友情链接</span></a></li></ul></nav></div></header><div class="article_topbg" style="background-image: url('/assets/imgs/top_bg.jpg')"><div class="topbg_container"><h1 class="title">记一次某东登录滑块 识别+轨迹</h1><div class="info"><div class="article_meta"><div class="left"><span class="avatar"><img class="yu13_img_rotate" src="/assets/imgs/avatar.jpg" alt=""/><a href="/about">Wantoper</a></span><span><i class="yufont icon-yingyong"></i><a href="/categories/Python/">Python</a></span><span><i class="yufont icon-rili"></i>2024-9-10</span></div></div></div></div></div><div class="container log_container clearfix"><div class="article_content left"> <div class="article_main"><article class="content"><div class="content_text article_text"> <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><strong>前段时间闲来无事想找个带轨迹的滑块练练手，正好找到一个算是入门级的小demo了，近期有空整理了技术点更新上来记录一下~~</strong></p>
<p>这个滑块主要难点就是轨迹，只要轨迹过了剩下的都很轻松，所以作为滑块类入门的demo最合适了~ 把这个滑块过了再去对抗更高级些的就有思路了。</p>
<p>入口就不放了 从官网进入手动登录就会弹</p>
<img src="/2024/09/10/JD-Slider/image-20240910104300386.png"  alt="image-20240910104300386" style="width:30%"/>



<h1 id="接口分析"><a href="#接口分析" class="headerlink" title="接口分析"></a>接口分析</h1><p>点击一下刷新验证码可以看到这个包</p>
<img src="/2024/09/10/JD-Slider/image-20240910104947224.png" class="">

<p>其中bg为后面的背景图，patch为滑块的小拼图。后续可以使用模板匹配来进行识别。</p>
<img src="/2024/09/10/JD-Slider/image-20240910105023919.png"  style="width:50%;" />

<p>验证接口</p>
<p>手动滑一次可以看到该包</p>
<img src="/2024/09/10/JD-Slider/image-20240910105511812.png" class="">

<p>c就是前面接口中返回的challenge的值，d为轨迹的密文，下面进行逆向分析。w的值就较为重要了，应该是bg图片在页面上的大小，一开始我没注意到这个值，导致折磨了我很久，后续的轨迹以及识别位置对了也会返回失败，后面才反应出来去分析这个值。</p>
<ul>
<li><strong>返回值的说明先写在前头</strong></li>
</ul>
<ol>
<li><p>返回值0为验证失败<br><code>jsonp_xxxxx(&#123;&quot;success&quot;:&quot;0&quot;,&quot;message&quot;:&quot;fail&quot;,&quot;nextVerify&quot;:&quot;SLIDE_VERIFY&quot;&#125;)</code></p>
</li>
<li><p>返回值1为识别滑块的距离正确  validate有返回值说明验证通过<br><code>jsonp_xxxxx(&#123;&quot;success&quot;:&quot;1&quot;,&quot;message&quot;:&quot;success&quot;,&quot;validate&quot;:&quot;xxxxxxx&quot;,&quot;nextVerify&quot;:&quot;NULL_VERIFY&quot;&#125;)</code></p>
</li>
<li><p>返回这个即为 轨迹校验失败<br><code>jsonp_xxxxx(&#123;&quot;u&quot;:&quot;2&quot;,&quot;success&quot;:&quot;0&quot;,&quot;message&quot;:&quot;refuse&quot;,&quot;nextVerify&quot;:&quot;SLIDE_VERIFY&quot;&#125;)</code></p>
</li>
</ol>
<h1 id="轨迹的加密"><a href="#轨迹的加密" class="headerlink" title="轨迹的加密"></a>轨迹的加密</h1><p>首先定位下断点，方法有很多种，我这里通过松开鼠标事件来定位</p>
<img src="/2024/09/10/JD-Slider/image-20240910110825685.png"  style="width:30%;" />

<p>然后滑动滑块，随便找个位置松开就会断住</p>
<img src="/2024/09/10/JD-Slider/image-20240910111256194.png" class="">

<p>断住后发现没有混淆，通过代码可以进行猜测分析。</p>
<p><code>a[&#39;mousePos&#39;] </code>很明显就是轨迹的数组了 在第0和第1组的x有一个偏差，这里大概是22-25左右。</p>
<p>后续跟入submit函数看他是怎么对该数组进行加密的</p>
<img src="/2024/09/10/JD-Slider/image-20240910111622712.png" class="">

<p>进入submit函数后通过控制台输出来慢慢分析，发现d参数就在下面</p>
<p>通过<code>a[&#39;getCoordinate&#39;](b)</code>来进行生成密文</p>
<img src="/2024/09/10/JD-Slider/image-20240910111855842.png" class="">

<p>再进入<code>a[&#39;getCoordinate&#39;]()</code>函数</p>
<img src="/2024/09/10/JD-Slider/image-20240910112240192.png" class="">

<p>非常简单的代码，扣下来就行，后面缺啥补啥，大概补2-3个函数即可。</p>
<img src="/2024/09/10/JD-Slider/image-20240910113521210.png"  style="width:33%;" />



<h1 id="滑块距离的识别"><a href="#滑块距离的识别" class="headerlink" title="滑块距离的识别"></a>滑块距离的识别</h1><p>我想到的方案大致有两种一种是使用模型来识别，还有一种是使用Opencv来进行模板匹配识别。</p>
<p>我这里为了方便省事采用第二种，正确率大概为96%左右 已经很够用了！ 给出参考代码如下</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">_tran_canny</span>(<span class="params">image</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;消除噪声&quot;&quot;&quot;</span></span><br><span class="line">    image = cv2.GaussianBlur(image, (<span class="number">3</span>, <span class="number">3</span>), <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">return</span> cv2.Canny(image, <span class="number">50</span>, <span class="number">150</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw_slider</span>(<span class="params">image, template, top_left, max_loc</span>):</span><br><span class="line">    w, h = image.shape[<span class="number">1</span>], image.shape[<span class="number">0</span>]</span><br><span class="line">    cv2.line(template, (top_left, <span class="number">0</span>), (top_left, <span class="number">94</span>), (<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">1</span>)</span><br><span class="line">    bottom_right = (max_loc[<span class="number">0</span>] + w, max_loc[<span class="number">1</span>] + h)</span><br><span class="line">    cv2.rectangle(template, max_loc, bottom_right, (<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">1</span>)</span><br><span class="line">    cv2.imshow(<span class="string">&#x27;Detected&#x27;</span>, template)</span><br><span class="line">    cv2.waitKey(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">detect_displacement</span>(<span class="params">img_slider_path, image_background_path</span>):</span><br><span class="line">    x = base64.b64decode(img_slider_path)</span><br><span class="line">    img_array = np.frombuffer(x, np.uint8)</span><br><span class="line">    image = cv2.imdecode(img_array, cv2.COLOR_RGB2BGR)</span><br><span class="line">    image = cv2.resize(image, (<span class="number">34</span>, <span class="number">34</span>))</span><br><span class="line"></span><br><span class="line">    y = base64.b64decode(image_background_path)</span><br><span class="line">    img_array2 = np.frombuffer(y, np.uint8)</span><br><span class="line">    template = cv2.imdecode(img_array2, cv2.COLOR_RGB2BGR)</span><br><span class="line">    <span class="comment">#这里的242即为前面的w值 在F12源代码中取即可</span></span><br><span class="line">    template = cv2.resize(template, (<span class="number">242</span>, <span class="number">94</span>))</span><br><span class="line">    <span class="comment">#进行模板匹配</span></span><br><span class="line">    res = cv2.matchTemplate(_tran_canny(image), _tran_canny(template), cv2.TM_CCOEFF_NORMED)</span><br><span class="line">    min_val, max_val, min_loc, max_loc = cv2.minMaxLoc(res)</span><br><span class="line">    <span class="comment">#计算出来需要加上一点偏移 就是前面分析的轨迹数组中的第0项与第1项的插值</span></span><br><span class="line">    top_left = <span class="built_in">round</span>(max_loc[<span class="number">0</span>])+<span class="number">11</span></span><br><span class="line">    <span class="built_in">print</span>(top_left,max_loc)</span><br><span class="line"></span><br><span class="line">    draw_slider(image, template, top_left, max_loc)</span><br><span class="line">    <span class="keyword">return</span> top_left</span><br></pre></td></tr></table></figure>

<p>这里需要注意的是对template进行resize为242 对应上前面的w值，而后续的top_left计算出后需要加上一点偏移，偏移量就是前面分析的轨迹数组中的第0项与第1项的差值，我这里取的为11，一定要与轨迹数组中的对应。</p>
<img src="/2024/09/10/JD-Slider/image-20240911004323138.png"  alt="image-20240911004323138" style="width:50%;" />

<h1 id="滑动轨迹"><a href="#滑动轨迹" class="headerlink" title="滑动轨迹"></a>滑动轨迹</h1><p>这就到了整个流程中最难的一步了，轨迹校验上了模型，我尝试了几种简单的生成都过不了，<code>贝塞尔曲线</code> <code>随机生成模拟</code> <code>基于前两种后加柏林噪声</code>。</p>
<p>本来想研究出一套能过的算法，久经折磨之后还是放弃了，使用手动采集轨迹后面再进行裁剪合成。这样通过率大概只有70%-80%左右 也勉强算够用了。</p>
<p>生成轨迹的参考代码</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">track=[[<span class="number">1177</span>,<span class="number">339</span>,<span class="number">1723343514943</span>],[<span class="number">1188</span>,<span class="number">370</span>,<span class="number">1723343514943</span>],[<span class="number">1189</span>,<span class="number">370</span>,<span class="number">1723343515185</span>],[<span class="number">1191</span>,<span class="number">371</span>,<span class="number">1723343515192</span>],[<span class="number">1192</span>,<span class="number">371</span>,<span class="number">1723343515200</span>],[<span class="number">1194</span>,<span class="number">371</span>,<span class="number">1723343515208</span>],[<span class="number">1195</span>,<span class="number">372</span>,<span class="number">1723343515225</span>],[<span class="number">1196</span>,<span class="number">372</span>,<span class="number">1723343515233</span>],[<span class="number">1197</span>,<span class="number">372</span>,<span class="number">1723343515248</span>],[<span class="number">1199</span>,<span class="number">372</span>,<span class="number">1723343515264</span>],[<span class="number">1200</span>,<span class="number">373</span>,<span class="number">1723343515280</span>],[<span class="number">1201</span>,<span class="number">373</span>,<span class="number">1723343515288</span>],[<span class="number">1202</span>,<span class="number">373</span>,<span class="number">1723343515304</span>],[<span class="number">1203</span>,<span class="number">373</span>,<span class="number">1723343515385</span>],[<span class="number">1204</span>,<span class="number">373</span>,<span class="number">1723343515401</span>],[<span class="number">1205</span>,<span class="number">373</span>,<span class="number">1723343515417</span>],[<span class="number">1205</span>,<span class="number">374</span>,<span class="number">1723343515425</span>],[<span class="number">1206</span>,<span class="number">374</span>,<span class="number">1723343515432</span>],[<span class="number">1207</span>,<span class="number">374</span>,<span class="number">1723343515440</span>],[<span class="number">1208</span>,<span class="number">374</span>,<span class="number">1723343515448</span>],[<span class="number">1209</span>,<span class="number">374</span>,<span class="number">1723343515456</span>],[<span class="number">1210</span>,<span class="number">374</span>,<span class="number">1723343515464</span>],[<span class="number">1211</span>,<span class="number">374</span>,<span class="number">1723343515472</span>],[<span class="number">1212</span>,<span class="number">374</span>,<span class="number">1723343515480</span>],[<span class="number">1213</span>,<span class="number">374</span>,<span class="number">1723343515488</span>],[<span class="number">1214</span>,<span class="number">374</span>,<span class="number">1723343515496</span>],[<span class="number">1215</span>,<span class="number">374</span>,<span class="number">1723343515504</span>],[<span class="number">1216</span>,<span class="number">374</span>,<span class="number">1723343515520</span>],[<span class="number">1217</span>,<span class="number">374</span>,<span class="number">1723343515530</span>],[<span class="number">1218</span>,<span class="number">374</span>,<span class="number">1723343515553</span>],[<span class="number">1219</span>,<span class="number">374</span>,<span class="number">1723343515577</span>],[<span class="number">1220</span>,<span class="number">374</span>,<span class="number">1723343515593</span>],[<span class="number">1221</span>,<span class="number">374</span>,<span class="number">1723343515609</span>],[<span class="number">1222</span>,<span class="number">374</span>,<span class="number">1723343515641</span>],[<span class="number">1223</span>,<span class="number">374</span>,<span class="number">1723343515665</span>],[<span class="number">1224</span>,<span class="number">374</span>,<span class="number">1723343515674</span>],[<span class="number">1225</span>,<span class="number">374</span>,<span class="number">1723343515680</span>],[<span class="number">1226</span>,<span class="number">374</span>,<span class="number">1723343515689</span>],[<span class="number">1227</span>,<span class="number">374</span>,<span class="number">1723343515696</span>],[<span class="number">1229</span>,<span class="number">374</span>,<span class="number">1723343515704</span>],[<span class="number">1230</span>,<span class="number">375</span>,<span class="number">1723343515712</span>],[<span class="number">1232</span>,<span class="number">375</span>,<span class="number">1723343515729</span>],[<span class="number">1234</span>,<span class="number">375</span>,<span class="number">1723343515737</span>],[<span class="number">1235</span>,<span class="number">376</span>,<span class="number">1723343515744</span>],[<span class="number">1237</span>,<span class="number">376</span>,<span class="number">1723343515752</span>],[<span class="number">1239</span>,<span class="number">376</span>,<span class="number">1723343515760</span>],[<span class="number">1241</span>,<span class="number">377</span>,<span class="number">1723343515768</span>],[<span class="number">1242</span>,<span class="number">377</span>,<span class="number">1723343515776</span>],[<span class="number">1244</span>,<span class="number">377</span>,<span class="number">1723343515784</span>],[<span class="number">1245</span>,<span class="number">377</span>,<span class="number">1723343515793</span>],[<span class="number">1246</span>,<span class="number">377</span>,<span class="number">1723343515800</span>],[<span class="number">1247</span>,<span class="number">377</span>,<span class="number">1723343515809</span>],[<span class="number">1248</span>,<span class="number">377</span>,<span class="number">1723343515816</span>],[<span class="number">1249</span>,<span class="number">377</span>,<span class="number">1723343515824</span>],[<span class="number">1250</span>,<span class="number">377</span>,<span class="number">1723343515832</span>],[<span class="number">1251</span>,<span class="number">377</span>,<span class="number">1723343515840</span>],[<span class="number">1252</span>,<span class="number">377</span>,<span class="number">1723343515848</span>],[<span class="number">1253</span>,<span class="number">377</span>,<span class="number">1723343515857</span>],[<span class="number">1255</span>,<span class="number">377</span>,<span class="number">1723343515864</span>],[<span class="number">1256</span>,<span class="number">377</span>,<span class="number">1723343515872</span>],[<span class="number">1257</span>,<span class="number">377</span>,<span class="number">1723343515880</span>],[<span class="number">1258</span>,<span class="number">377</span>,<span class="number">1723343515888</span>],[<span class="number">1259</span>,<span class="number">377</span>,<span class="number">1723343515896</span>],[<span class="number">1261</span>,<span class="number">377</span>,<span class="number">1723343515905</span>],[<span class="number">1263</span>,<span class="number">377</span>,<span class="number">1723343515912</span>],[<span class="number">1264</span>,<span class="number">377</span>,<span class="number">1723343515920</span>],[<span class="number">1266</span>,<span class="number">377</span>,<span class="number">1723343515928</span>],[<span class="number">1268</span>,<span class="number">377</span>,<span class="number">1723343515936</span>],[<span class="number">1270</span>,<span class="number">377</span>,<span class="number">1723343515944</span>],[<span class="number">1272</span>,<span class="number">377</span>,<span class="number">1723343515952</span>],[<span class="number">1275</span>,<span class="number">377</span>,<span class="number">1723343515960</span>],[<span class="number">1276</span>,<span class="number">377</span>,<span class="number">1723343515968</span>],[<span class="number">1277</span>,<span class="number">377</span>,<span class="number">1723343515976</span>],[<span class="number">1279</span>,<span class="number">377</span>,<span class="number">1723343515984</span>],[<span class="number">1280</span>,<span class="number">377</span>,<span class="number">1723343516000</span>],[<span class="number">1281</span>,<span class="number">377</span>,<span class="number">1723343516009</span>],[<span class="number">1282</span>,<span class="number">377</span>,<span class="number">1723343516025</span>],[<span class="number">1283</span>,<span class="number">377</span>,<span class="number">1723343516033</span>],[<span class="number">1285</span>,<span class="number">377</span>,<span class="number">1723343516047</span>],[<span class="number">1287</span>,<span class="number">377</span>,<span class="number">1723343516048</span>],[<span class="number">1288</span>,<span class="number">377</span>,<span class="number">1723343516056</span>],[<span class="number">1290</span>,<span class="number">377</span>,<span class="number">1723343516064</span>],[<span class="number">1291</span>,<span class="number">377</span>,<span class="number">1723343516072</span>],[<span class="number">1292</span>,<span class="number">377</span>,<span class="number">1723343516080</span>],[<span class="number">1294</span>,<span class="number">377</span>,<span class="number">1723343516088</span>],[<span class="number">1295</span>,<span class="number">377</span>,<span class="number">1723343516096</span>],[<span class="number">1296</span>,<span class="number">377</span>,<span class="number">1723343516105</span>],[<span class="number">1298</span>,<span class="number">377</span>,<span class="number">1723343516112</span>],[<span class="number">1299</span>,<span class="number">377</span>,<span class="number">1723343516121</span>],[<span class="number">1300</span>,<span class="number">377</span>,<span class="number">1723343516128</span>],[<span class="number">1302</span>,<span class="number">377</span>,<span class="number">1723343516136</span>],[<span class="number">1303</span>,<span class="number">377</span>,<span class="number">1723343516144</span>],[<span class="number">1305</span>,<span class="number">377</span>,<span class="number">1723343516152</span>],[<span class="number">1307</span>,<span class="number">377</span>,<span class="number">1723343516160</span>],[<span class="number">1309</span>,<span class="number">377</span>,<span class="number">1723343516168</span>],[<span class="number">1310</span>,<span class="number">377</span>,<span class="number">1723343516176</span>],[<span class="number">1312</span>,<span class="number">377</span>,<span class="number">1723343516184</span>],[<span class="number">1315</span>,<span class="number">377</span>,<span class="number">1723343516192</span>],[<span class="number">1316</span>,<span class="number">377</span>,<span class="number">1723343516200</span>],[<span class="number">1318</span>,<span class="number">377</span>,<span class="number">1723343516211</span>],[<span class="number">1320</span>,<span class="number">377</span>,<span class="number">1723343516216</span>],[<span class="number">1322</span>,<span class="number">377</span>,<span class="number">1723343516225</span>],[<span class="number">1323</span>,<span class="number">377</span>,<span class="number">1723343516232</span>],[<span class="number">1325</span>,<span class="number">377</span>,<span class="number">1723343516241</span>],[<span class="number">1327</span>,<span class="number">377</span>,<span class="number">1723343516248</span>],[<span class="number">1329</span>,<span class="number">377</span>,<span class="number">1723343516256</span>],[<span class="number">1332</span>,<span class="number">377</span>,<span class="number">1723343516264</span>],[<span class="number">1334</span>,<span class="number">377</span>,<span class="number">1723343516273</span>],[<span class="number">1336</span>,<span class="number">377</span>,<span class="number">1723343516281</span>],[<span class="number">1339</span>,<span class="number">377</span>,<span class="number">1723343516289</span>],[<span class="number">1341</span>,<span class="number">377</span>,<span class="number">1723343516296</span>],[<span class="number">1343</span>,<span class="number">377</span>,<span class="number">1723343516305</span>],[<span class="number">1345</span>,<span class="number">377</span>,<span class="number">1723343516312</span>],[<span class="number">1346</span>,<span class="number">377</span>,<span class="number">1723343516320</span>],[<span class="number">1348</span>,<span class="number">377</span>,<span class="number">1723343516328</span>],[<span class="number">1349</span>,<span class="number">377</span>,<span class="number">1723343516337</span>],[<span class="number">1350</span>,<span class="number">377</span>,<span class="number">1723343516344</span>],[<span class="number">1351</span>,<span class="number">377</span>,<span class="number">1723343516353</span>],[<span class="number">1353</span>,<span class="number">377</span>,<span class="number">1723343516360</span>],[<span class="number">1354</span>,<span class="number">377</span>,<span class="number">1723343516368</span>],[<span class="number">1355</span>,<span class="number">377</span>,<span class="number">1723343516376</span>],[<span class="number">1356</span>,<span class="number">377</span>,<span class="number">1723343516388</span>],[<span class="number">1357</span>,<span class="number">377</span>,<span class="number">1723343516392</span>],[<span class="number">1358</span>,<span class="number">377</span>,<span class="number">1723343516401</span>],[<span class="number">1360</span>,<span class="number">377</span>,<span class="number">1723343516409</span>],[<span class="number">1361</span>,<span class="number">377</span>,<span class="number">1723343516416</span>],[<span class="number">1363</span>,<span class="number">377</span>,<span class="number">1723343516424</span>],[<span class="number">1364</span>,<span class="number">377</span>,<span class="number">1723343516433</span>],[<span class="number">1366</span>,<span class="number">377</span>,<span class="number">1723343516441</span>],[<span class="number">1368</span>,<span class="number">377</span>,<span class="number">1723343516449</span>],[<span class="number">1369</span>,<span class="number">377</span>,<span class="number">1723343516456</span>],[<span class="number">1371</span>,<span class="number">377</span>,<span class="number">1723343516465</span>],[<span class="number">1373</span>,<span class="number">377</span>,<span class="number">1723343516472</span>],[<span class="number">1375</span>,<span class="number">377</span>,<span class="number">1723343516480</span>],[<span class="number">1376</span>,<span class="number">377</span>,<span class="number">1723343516488</span>],[<span class="number">1378</span>,<span class="number">377</span>,<span class="number">1723343516497</span>],[<span class="number">1379</span>,<span class="number">377</span>,<span class="number">1723343516504</span>],[<span class="number">1380</span>,<span class="number">377</span>,<span class="number">1723343516530</span>],[<span class="number">1381</span>,<span class="number">377</span>,<span class="number">1723343516567</span>],[<span class="number">1382</span>,<span class="number">377</span>,<span class="number">1723343516568</span>],[<span class="number">1384</span>,<span class="number">377</span>,<span class="number">1723343516576</span>],[<span class="number">1385</span>,<span class="number">377</span>,<span class="number">1723343516584</span>],[<span class="number">1386</span>,<span class="number">377</span>,<span class="number">1723343516592</span>],[<span class="number">1387</span>,<span class="number">377</span>,<span class="number">1723343516600</span>],[<span class="number">1388</span>,<span class="number">377</span>,<span class="number">1723343516608</span>],[<span class="number">1389</span>,<span class="number">377</span>,<span class="number">1723343516616</span>],[<span class="number">1390</span>,<span class="number">377</span>,<span class="number">1723343516625</span>],[<span class="number">1391</span>,<span class="number">377</span>,<span class="number">1723343516632</span>],[<span class="number">1392</span>,<span class="number">377</span>,<span class="number">1723343516641</span>],[<span class="number">1393</span>,<span class="number">377</span>,<span class="number">1723343516648</span>],[<span class="number">1394</span>,<span class="number">377</span>,<span class="number">1723343516664</span>],[<span class="number">1395</span>,<span class="number">377</span>,<span class="number">1723343516672</span>],[<span class="number">1396</span>,<span class="number">377</span>,<span class="number">1723343516689</span>],[<span class="number">1397</span>,<span class="number">377</span>,<span class="number">1723343517035</span>],[<span class="number">1398</span>,<span class="number">377</span>,<span class="number">1723343517040</span>],[<span class="number">1399</span>,<span class="number">377</span>,<span class="number">1723343517048</span>],[<span class="number">1400</span>,<span class="number">377</span>,<span class="number">1723343517068</span>]]</span><br><span class="line">roch=[[<span class="number">0</span>, <span class="number">414</span>, <span class="number">1723343562711</span>], [<span class="number">0</span>, <span class="number">415</span>, <span class="number">1723343562719</span>], [<span class="number">1</span>, <span class="number">415</span>, <span class="number">1723343562735</span>], [<span class="number">2</span>, <span class="number">415</span>, <span class="number">1723343562751</span>], [<span class="number">3</span>, <span class="number">415</span>, <span class="number">1723343562767</span>], [<span class="number">4</span>, <span class="number">415</span>, <span class="number">1723343562783</span>], [<span class="number">5</span>, <span class="number">415</span>, <span class="number">1723343562799</span>], [<span class="number">6</span>, <span class="number">415</span>, <span class="number">1723343562808</span>], [<span class="number">7</span>, <span class="number">415</span>, <span class="number">1723343562818</span>], [<span class="number">8</span>, <span class="number">415</span>, <span class="number">1723343562831</span>], [<span class="number">9</span>, <span class="number">415</span>, <span class="number">1723343562847</span>], [<span class="number">10</span>, <span class="number">415</span>, <span class="number">1723343562855</span>], [<span class="number">11</span>, <span class="number">414</span>, <span class="number">1723343562863</span>], [<span class="number">12</span>, <span class="number">414</span>, <span class="number">1723343562871</span>], [<span class="number">13</span>, <span class="number">414</span>, <span class="number">1723343562887</span>], [<span class="number">13</span>, <span class="number">413</span>, <span class="number">1723343562894</span>], [<span class="number">14</span>, <span class="number">413</span>, <span class="number">1723343562903</span>], [<span class="number">15</span>, <span class="number">413</span>, <span class="number">1723343562975</span>], [<span class="number">14</span>, <span class="number">413</span>, <span class="number">1723343563159</span>], [<span class="number">13</span>, <span class="number">413</span>, <span class="number">1723343563175</span>], [<span class="number">12</span>, <span class="number">413</span>, <span class="number">1723343563191</span>], [<span class="number">11</span>, <span class="number">413</span>, <span class="number">1723343563223</span>], [<span class="number">10</span>, <span class="number">413</span>, <span class="number">1723343563255</span>], [<span class="number">9</span>, <span class="number">413</span>, <span class="number">1723343563263</span>], [<span class="number">8</span>, <span class="number">413</span>, <span class="number">1723343563271</span>], [<span class="number">7</span>, <span class="number">413</span>, <span class="number">1723343563278</span>], [<span class="number">6</span>, <span class="number">413</span>, <span class="number">1723343563286</span>], [<span class="number">5</span>, <span class="number">413</span>, <span class="number">1723343563295</span>], [<span class="number">4</span>, <span class="number">413</span>, <span class="number">1723343563302</span>], [<span class="number">3</span>, <span class="number">413</span>, <span class="number">1723343563311</span>], [<span class="number">2</span>, <span class="number">413</span>, <span class="number">1723343563375</span>], [<span class="number">1</span>, <span class="number">413</span>, <span class="number">1723343563490</span>], [<span class="number">0</span>, <span class="number">413</span>, <span class="number">1723343563527</span>], [<span class="number">0</span>, <span class="number">413</span>, <span class="number">1723343564062</span>]]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_track</span>(<span class="params">distance</span>):</span><br><span class="line">    sliders=[]</span><br><span class="line">    timenow=<span class="built_in">str</span>(<span class="built_in">int</span>(time.time()/<span class="number">10</span>))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> track:</span><br><span class="line">        <span class="keyword">if</span> i[<span class="number">0</span>] &lt;= distance+track[<span class="number">0</span>][<span class="number">0</span>]:</span><br><span class="line">            sliders.append([i[<span class="number">0</span>],i[<span class="number">1</span>],<span class="built_in">int</span>(timenow+<span class="built_in">str</span>(i[<span class="number">2</span>])[-<span class="number">4</span>:])])</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            sliders.append([distance + track[<span class="number">0</span>][<span class="number">0</span>], i[<span class="number">1</span>], <span class="built_in">int</span>(timenow + <span class="built_in">str</span>(i[<span class="number">2</span>])[-<span class="number">4</span>:]) + <span class="number">700</span> + <span class="built_in">int</span>(random.random() * <span class="number">1000</span>)])</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    lastx=sliders[-<span class="number">1</span>][<span class="number">0</span>]</span><br><span class="line">    lasty=sliders[-<span class="number">1</span>][<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(roch)-<span class="number">1</span>):</span><br><span class="line">        <span class="keyword">if</span> i == <span class="number">0</span> <span class="keyword">and</span> roch[i][<span class="number">0</span>] == <span class="number">0</span>:</span><br><span class="line">            times=sliders[-<span class="number">1</span>][<span class="number">2</span>]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            times=sliders[-<span class="number">1</span>][<span class="number">2</span>]+(roch[i+<span class="number">1</span>][<span class="number">2</span>]-roch[i][<span class="number">2</span>])</span><br><span class="line">        sliders.append([lastx+roch[i][<span class="number">0</span>],lasty,times])</span><br><span class="line">    sliders.append([lastx+roch[-<span class="number">1</span>][<span class="number">0</span>],lasty,sliders[-<span class="number">1</span>][<span class="number">2</span>]+<span class="number">1000</span>])</span><br><span class="line">    <span class="keyword">return</span> sliders</span><br></pre></td></tr></table></figure>

<p><code>track</code>数组为从滑块起点到滑块末尾的轨迹  <code>roch</code>为晃动的轨迹</p>
<p>roch的录制：先打开滑块，准备手动滑一次，先从滑块开始然后滑正确的滑块缺口上稳住鼠标，然后<code>模拟晃动往左或者往右进行滑动，然后再滑回滑块的位置</code> 后面这一段就是晃动的轨迹了。把后面这一段的x减去滑块缺口的位置就可以得出0 1 2 3 4 5 ··· 5 4 3 2 1 0相关的轨迹点</p>
<p>得到两个数组后进行裁剪的合成，首先生成时间戳，利用track中的时间戳后4位+当前时间戳的前6位</p>
<p>组成新的时间戳，先从trach数组中获取滑块起点到滑块位置的轨迹点，例如当前滑块位置为103，则获取起点到103的轨迹点，然后再最后面添加一个精准的轨迹点 使用<code>distance + track[0][0]</code>的方法来添加最后一个轨迹点。</p>
<p>得到上面的正常轨迹之后，通过率也能有60%左右，还想通过率再高一点就在正常轨迹的后面拼接晃动的轨迹点。</p>
<p>在sliders后的第一位添加时 时间戳为正常轨迹的最后一个点的时间戳作为起始点，后续的每一个晃动轨迹点的时间戳都为<code>前一项的时间戳+晃动数组中后一位的时间戳-当前晃动数组中的时间戳</code> <code>times=sliders[-1][2]+(roch[i+1][2]-roch[i][2])</code>。</p>
<p>全的代码就不放上了，还有一个点需要注意的<code>获取验证码</code>和<code>提交</code>之间不能太快，不然就都是失败，延迟大概5秒左右再提交。</p>
<p>最后附上被折磨了几天后的结果~</p>
<img src="/2024/09/10/JD-Slider/image-20240911083615617.png" class="" title="image-20240911083615617">
</div><div class="article_tags"><span> <i class="yufont icon-tag"></i> 标签: </span><a href="/tags/%E6%9D%82%E4%B8%83%E6%9D%82%E5%85%AB/">杂七杂八</a></div></article><div class="article-copyright"><p>标题: <a href="/2024/09/10/JD-Slider/">记一次某东登录滑块 识别+轨迹</a></p><p> 链接: <a href="/2024/09/10/JD-Slider/">https://wantoper.github.io/2024/09/10/JD-Slider/</a></p><p> 版权声明: 若无特殊标注皆为 Wantoper 原创版权, 转载请以链接形式注明作者及原始出处</p><p>最后编辑时间: 2024-10-05</p></div><div class="page_turning"><a class="page_up" href="/2024/09/06/python%E9%80%9A%E8%BF%87Airscript-API%E6%93%8D%E4%BD%9CWps-%E4%BA%91%E8%A1%A8%E6%A0%BC/"
  style="background-image:url(/2024/09/06/python%E9%80%9A%E8%BF%87Airscript-API%E6%93%8D%E4%BD%9CWps-%E4%BA%91%E8%A1%A8%E6%A0%BC/image-20240906150141718.png)">
  <div class="inner"><span>上一篇:</span>
    <p>python通过Airscript API操作Wps 云表格</p>
  </div>
</a>
<a class="page_down" href="/2024/09/12/label-studio-sam/"
style="background-image:url(/2024/09/12/label-studio-sam/640.gif)">
<div class="inner"><span>下一篇:</span>
  <p>部署playground label_studio+sam模型 自动打标注</p>
</div>
</a>
</div></div></div><div class="article_sidebar left"><div class="author_sidebar sidebar_container"><div class="author_info"><div class="avatar"><img class="yu13_img_rotate" src="/assets/imgs/avatar.jpg" alt=""/></div><div class="author_name"><h3><a href="/about">Wantoper</a></h3><p>不断学习，不断提升！</p></div></div><div class="author_data"><ul><li> <div> <span>6</span><p>文章</p></div></li><li> <div> <span>1</span><p>分类</p></div></li><li> <div> <span>1</span><p>标签</p></div></li></ul></div></div><div class="sidebar_tags sidebar_container"><h3 class="sidebar_title"><i class="yufont icon-24gl-folderOpen"></i>分类</h3><div class="archive_lists"><ul class="category-list"><li><a href="/categories/Python/">Python (3)</a></li></ul></div></div><div class="sidebar_tags sidebar_container"><h3 class="sidebar_title"><i class="yufont icon-tag"></i>标签</h3><a href="/tags/%E6%9D%82%E4%B8%83%E6%9D%82%E5%85%AB/" style="font-size: 16px;">杂七杂八</a></div><div class="catalogue sidebar_container"><h3 class="sidebar_title"><i class="yufont icon-feiji"></i>目录</h3><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3%E5%88%86%E6%9E%90"><span class="toc-number">2.</span> <span class="toc-text">接口分析</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BD%A8%E8%BF%B9%E7%9A%84%E5%8A%A0%E5%AF%86"><span class="toc-number">3.</span> <span class="toc-text">轨迹的加密</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%BB%91%E5%9D%97%E8%B7%9D%E7%A6%BB%E7%9A%84%E8%AF%86%E5%88%AB"><span class="toc-number">4.</span> <span class="toc-text">滑块距离的识别</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%BB%91%E5%8A%A8%E8%BD%A8%E8%BF%B9"><span class="toc-number">5.</span> <span class="toc-text">滑动轨迹</span></a></li></ol></div></div><script>// 处理滚动事件的函数
function handleScroll() {
    var scrollTop = document.body.scrollTop || document.documentElement.scrollTop;
    var catalogueElement = document.querySelector('.catalogue'); // 使用类名查询元素
    
    if (catalogueElement.dataTop < scrollTop) {
        // 当页面滚动超过目录初始位置时，更新目录位置
        catalogueElement.style.position = 'fixed';
        catalogueElement.style.top = '100px'; // 固定到顶部
        catalogueElement.style.left = catalogueElement.dataLeft; // 保持原来的水平位置
    } else {
        // 恢复目录到原始位置
        catalogueElement.style.position = 'static';
    }
}

// 计算元素的初始位置并存储
function setInitialPosition(element) {
    var offsetTop = element.offsetTop;
    var offsetLeft = element.offsetLeft;

    // 计算元素相对于文档的位置
    var currentElement = element; // 保存原始元素引用
    while ((currentElement = currentElement.offsetParent)) {
        offsetTop += currentElement.offsetTop;
        offsetLeft += currentElement.offsetLeft;
    }
    // 将计算好的位置存储在元素的自定义属性中
    element.dataTop = offsetTop;
    element.dataLeft = offsetLeft;
}

// 页面加载完成后执行
window.onload = function() {
    var catalogueElement = document.querySelector('.catalogue'); // 使用类名查询元素
    setInitialPosition(catalogueElement); // 设置目录元素的初始位置
    window.onscroll = handleScroll; // 绑定滚动事件
};</script></div><footer class="footer"> <div class="footer_bottom"><div class="footer_box"><div class="copy"><span>主题</span><a target="_blank" rel="noopener" href="https://hexo.io/zh-cn">Hexo</a><span>模板</span><a href="/">Wantoper</a></div><div class="copy"><span>© 2022<a href="/">Wantoper</a>暂无备案号</span></div></div></div></footer><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"> </script><script src="/assets/lib/prettify/prettify.js"> </script><script src="/assets/lib/fancybox/fancybox.js"> </script><script src="/assets/js/app.js"> </script></div></body></html>